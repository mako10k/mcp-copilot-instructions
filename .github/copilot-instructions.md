# Copilot Instructions

<!-- Auto-generated by mcp-copilot-instructions -->
<!-- Context: phase=testing, focus=優先フラグ, リミット機能, feedback -->
<!-- Generated: 2025-12-01T07:32:31.702Z -->

## conventions: conventions/typescript.md


# TypeScript コーディング規約

## 型安全性

- すべての関数に明示的な戻り値の型を指定
- `any`型の使用は最小限に（やむを得ない場合のみ）
- `unknown`型を活用して型安全性を保つ

## 命名規則

- **変数/関数**: camelCase（例: `getUserData`, `totalCount`）
- **型/インターフェース**: PascalCase（例: `UserProfile`, `ApiResponse`）
- **定数**: UPPER_SNAKE_CASE（例: `MAX_RETRY_COUNT`）

## ファイル構成

```typescript
// インポート順序
import { 標準ライブラリ } from 'node:fs';
import { サードパーティ } from 'express';
import { 内部モジュール } from '../utils';

// 型定義
interface MyType { }

// 定数
const CONSTANT = 'value';

// 関数
export function myFunction(): ReturnType { }
```


---

## tools: tools/mcp-server-usage.md


# MCP Copilot Instructions Server の使い方

## 基本コンセプト

このMCPサーバは、**LLMのアテンション分散問題を解決**するために、巨大な指示書データベースから**今必要な指示だけを動的に抽出**します。

## 主要ツール

### `change_context` - 開発文脈の変更

現在の開発フェーズや焦点を変更すると、自動的に最適な指示書が生成されます。

```typescript
// 使用例: 開発フェーズに移行
change_context({
  action: "update",
  state: {
    phase: "development",
    focus: ["API認証", "JWT"],
    priority: "high"
  }
})
```

### 利用可能なphase

- `development`: 新機能開発
- `refactoring`: コードリファクタリング
- `testing`: テスト作成・修正
- `debugging`: バグ修正
- `documentation`: ドキュメント作成

## 動的指示書生成の仕組み

1. **change_context実行**: 開発文脈を設定
2. **自動スコアリング**: 現在のphase/focusから関連指示を計算
3. **指示書生成**: 必須指示 + 関連指示（最大10セクション）を抽出
4. **LLMが集中**: 今必要な指示だけでアテンションを集中

## 必須指示（常に含まれる）

- この使い方ガイド（tools/mcp-server-usage.md）
- TypeScript規約（conventions/typescript.md）


---

## patterns: patterns/testing.md


# テストパターン

## ユニットテストの基本

```typescript
describe('calculateSum', () => {
  it('正の数の合計を計算', () => {
    expect(calculateSum(2, 3)).toBe(5);
  });

  it('負の数を含む合計を計算', () => {
    expect(calculateSum(-2, 3)).toBe(1);
  });
});
```

## モック

```typescript
const mockFn = jest.fn();
mockFn.mockReturnValue(42);
expect(mockFn()).toBe(42);
```

## 非同期テスト

```typescript
it('非同期処理のテスト', async () => {
  const data = await fetchData();
  expect(data).toBeDefined();
});
```


---

