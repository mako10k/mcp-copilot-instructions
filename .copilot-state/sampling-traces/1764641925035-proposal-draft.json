{
  "intent": "proposal-draft",
  "timestamp": "2025-12-02T02:18:45.035Z",
  "request": {
    "prompt": "You are creating a migration proposal for Copilot instructions onboarding.\n\nProposal data:\n```json\n{\n  \"pattern\": \"messy\",\n  \"proposal\": {\n    \"title\": \"Manual Fix Required\",\n    \"summary\": \"å•é¡Œã®ã‚ã‚‹ç®‡æ‰€ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ (1ä»¶)ã€‚è‡ªå‹•ç§»è¡Œã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚\",\n    \"steps\": [\n      \"1. çŸ›ç›¾ãƒ»é‡è¤‡ãƒ»æ›–æ˜§è¡¨ç¾ã‚’æ‰‹å‹•ã§ä¿®æ­£\",\n      \"2. ä¿®æ­£å¾Œã« onboarding({ action: \\\"analyze\\\" }) ã‚’å†å®Ÿè¡Œ\",\n      \"3. äº’æ›æ€§ãŒç¢ºèªã§ããŸã‚‰ propose â†’ migrate ã‚’æ¤œè¨\"\n    ],\n    \"risk\": \"high\",\n    \"backupFile\": \".copilot-state/backup/copilot-instructions.md.bak-2025-12-02T02-18-30-917Z\",\n    \"rollbackUntil\": \"2025-12-09T02:18:30.917Z\"\n  }\n}\n```\n\nGenerate a clear, human-friendly proposal explaining:\n1. The proposed migration plan title and summary\n2. Step-by-step migration process\n3. Risk level and why\n4. Backup strategy and rollback deadline\n5. Suggested sections (if applicable)\n6. Next actions (approve/migrate/skip)\n\nKeep the tone encouraging and explain technical details clearly.",
    "context": {
      "analysis": {
        "exists": true,
        "pattern": "messy",
        "problems": [
          {
            "type": "contradiction",
            "description": "çŸ›ç›¾: å‘½åè¦å‰‡ï¼ˆcamelCase vs snake_caseï¼‰",
            "locations": [
              {
                "line": 83,
                "text": "- **å¤‰æ•°/é–¢æ•°**: camelCaseï¼ˆä¾‹: `getUserData`, `totalCount`ï¼‰"
              },
              {
                "line": 85,
                "text": "- **å®šæ•°**: UPPER_SNAKE_CASEï¼ˆä¾‹: `MAX_RETRY_COUNT`ï¼‰"
              }
            ]
          }
        ],
        "structured": {
          "sections": [
            {
              "heading": "meta: ãƒ„ãƒ¼ãƒ«æ´»ç”¨ã‚¬ã‚¤ãƒ‰",
              "lineCount": 62,
              "startLine": 7,
              "content": "ã“ã®MCPã‚µãƒ¼ãƒã¯ã€æŒ‡ç¤ºæ›¸ã®å¤–éƒ¨è¨˜æ†¶ã¨å‹•çš„ç”Ÿæˆã‚’æ‹…ã„ã¾ã™ã€‚ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«ã‚’é©åˆ‡ã«æ´»ç”¨ã—ã¦ãã ã•ã„ã€‚\n\n### é–‹ç™ºçŠ¶æ…‹ã®ç®¡ç†\n\né–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã‚„ä½œæ¥­å†…å®¹ãŒå¤‰ã‚ã‚‹å ´åˆã€å¿…ãš `change_context` ãƒ„ãƒ¼ãƒ«ã§çŠ¶æ…‹ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚\n\n**ä½¿ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:\n- ãƒ•ã‚§ãƒ¼ã‚ºå¤‰æ›´æ™‚ï¼ˆé–‹ç™ºâ†’ãƒ†ã‚¹ãƒˆã€ãƒ†ã‚¹ãƒˆâ†’ãƒ‡ãƒãƒƒã‚°ã€ãªã©ï¼‰\n- ä½œæ¥­ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã®å¤‰æ›´æ™‚ï¼ˆAPIå®Ÿè£…â†’èªè¨¼å®Ÿè£…ã€ãªã©ï¼‰\n\n**åŠ¹æœ**: çŠ¶æ…‹å¤‰æ›´å¾Œã€ã“ã®æŒ‡ç¤ºæ›¸ã¯è‡ªå‹•çš„ã«å†ç”Ÿæˆã•ã‚Œã€ç¾åœ¨ã®ãƒ•ã‚§ãƒ¼ã‚ºã«é©ã—ãŸæŒ‡ç¤ºãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚\n\n### é–‹ç™ºãƒ«ãƒ¼ãƒ«ã®ç™»éŒ²\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ–°ã—ã„è¦ç´„ãƒ»ãƒ«ãƒ¼ãƒ«ãƒ»åˆ¶ç´„ã®æŒ‡ç¤ºã‚’å—ã‘ãŸå ´åˆã€ãã®å ´é™ã‚Šã®å¯¾å¿œã§ã¯ãªãã€å¿…ãš `project_context` ã«æ°¸ç¶šåŒ–ã—ã¦ãã ã•ã„ã€‚\n\n**ç™»éŒ²å‰ã®ç¢ºèª**:\n1. æ—¢å­˜ãƒ«ãƒ¼ãƒ«ã‚’æ¤œç´¢ï¼ˆ`project_context read`ï¼‰\n2. çŸ›ç›¾ãŒãªã„ã‹ç¢ºèª\n3. çŸ›ç›¾ãŒã‚ã‚‹å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã‚’æ±‚ã‚ã‚‹\n\n**é‡è¦**: ä¸€åº¦ç™»éŒ²ã—ãŸãƒ«ãƒ¼ãƒ«ã¯ã€ä»¥é™ã™ã¹ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã§å‚ç…§ã•ã‚Œã¾ã™ã€‚æ•£é€¸ã‚’é˜²ããŸã‚ã€å¿…ãšç™»éŒ²ã—ã¦ãã ã•ã„ã€‚\n\n### æŒ‡ç¤ºæ›¸ã®è‡ªå·±èªè­˜\n\n`instructions_structure` ãƒ„ãƒ¼ãƒ«ã¯ã€**ã“ã®æŒ‡ç¤ºæ›¸è‡ªä½“**ã‚’å¤‰æ›´ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä½¿ç”¨æ™‚ã¯ã€ä»¥ä¸‹ã‚’æ˜ç¤ºã—ã¦ãã ã•ã„ã€‚\n\n**æ³¨æ„äº‹é …**:\n- update/delete/insertå®Ÿè¡Œæ™‚ã¯ã€å¤‰æ›´å†…å®¹ã‚’æ˜ç¤º\n- ã€Œã“ã®æŒ‡ç¤ºæ›¸ãŒå¤‰æ›´ã•ã‚Œã¾ã™ã€ã¨è­¦å‘Š\n- å¤–éƒ¨å¤‰æ›´ãŒã‚ã‚‹å ´åˆã€ç«¶åˆæ¤œå‡ºæ©Ÿèƒ½ï¼ˆ`detect-conflicts`ï¼‰ãŒè‡ªå‹•ä½œå‹•\n\n### æ—¢å­˜ãƒ«ãƒ¼ãƒ«ã¨ã®æ•´åˆæ€§ç¢ºèª\n\næ–°ã—ã„æŒ‡ç¤ºã‚’å—ã‘ãŸéš›ã€æ—¢å­˜ã® `project_context` ã¨çŸ›ç›¾ã—ãªã„ã‹å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\n**ç¢ºèªæ‰‹é †**:\n1. é–¢é€£ã‚«ãƒ†ã‚´ãƒªã‚’æ¤œç´¢ï¼ˆ`project_context read`ï¼‰\n2. çŸ›ç›¾ã‚’æ¤œå‡ºã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é¸æŠè‚¢ã‚’æç¤º\n3. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã«å¾“ã£ã¦ã€æ—¢å­˜ãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°ã¾ãŸã¯ç¶­æŒ\n\n### æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®å°å…¥\n\nåˆå›å®Ÿè¡Œæ™‚ã€ã¾ãŸã¯æ—¢å­˜ã® `copilot-instructions.md` ãŒã‚ã‚‹å ´åˆã€`onboarding` ãƒ„ãƒ¼ãƒ«ã§åˆ†æã—ã¦ãã ã•ã„ã€‚\n\n**å‹•ä½œ**:\n- äº’æ›æ€§ãŒã‚ã‚‹å ´åˆ: è‡ªå‹•çš„ã«é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œ\n- äº’æ›æ€§ãŒãªã„å ´åˆ: æ©Ÿèƒ½åˆ¶é™ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰\n- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ææ¡ˆã‚’ç¢ºèªå¾Œã€æ‰¿èªã‚’å¾—ã¦å®Ÿè¡Œ\n\n---\n\n**ç¾åœ¨: é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º**\n- æ–°ã—ã„è¦ç´„ã¯ `project_context` ã«å³åº§ã«ç™»éŒ²\n- ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã®å‚ç…§ã‚’å„ªå…ˆ\n\n**ç¾åœ¨ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹**:\n- **APIé–¢é€£**: `project_context` ã§APIè¦ç´„ã‚’ç¢ºèª\n\n---"
            },
            {
              "heading": "conventions: conventions/typescript.md",
              "lineCount": 4,
              "startLine": 70,
              "content": "# TypeScript ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„"
            },
            {
              "heading": "å‹å®‰å…¨æ€§",
              "lineCount": 5,
              "startLine": 75,
              "content": "- ã™ã¹ã¦ã®é–¢æ•°ã«æ˜ç¤ºçš„ãªæˆ»ã‚Šå€¤ã®å‹ã‚’æŒ‡å®š\n- `any`å‹ã®ä½¿ç”¨ã¯æœ€å°é™ã«ï¼ˆã‚„ã‚€ã‚’å¾—ãªã„å ´åˆã®ã¿ï¼‰\n- `unknown`å‹ã‚’æ´»ç”¨ã—ã¦å‹å®‰å…¨æ€§ã‚’ä¿ã¤"
            },
            {
              "heading": "å‘½åè¦å‰‡",
              "lineCount": 5,
              "startLine": 81,
              "content": "- **å¤‰æ•°/é–¢æ•°**: camelCaseï¼ˆä¾‹: `getUserData`, `totalCount`ï¼‰\n- **å‹/ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: PascalCaseï¼ˆä¾‹: `UserProfile`, `ApiResponse`ï¼‰\n- **å®šæ•°**: UPPER_SNAKE_CASEï¼ˆä¾‹: `MAX_RETRY_COUNT`ï¼‰"
            },
            {
              "heading": "ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ",
              "lineCount": 20,
              "startLine": 87,
              "content": "```typescript\n// ã‚¤ãƒ³ãƒãƒ¼ãƒˆé †åº\nimport { æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª } from 'node:fs';\nimport { ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ } from 'express';\nimport { å†…éƒ¨ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« } from '../utils';\n\n// å‹å®šç¾©\ninterface MyType { }\n\n// å®šæ•°\nconst CONSTANT = 'value';\n\n// é–¢æ•°\nexport function myFunction(): ReturnType { }\n```\n\n\n---"
            },
            {
              "heading": "tools: tools/mcp-server-usage.md",
              "lineCount": 4,
              "startLine": 108,
              "content": "# MCP Copilot Instructions Server ã®ä½¿ã„æ–¹"
            },
            {
              "heading": "åŸºæœ¬ã‚³ãƒ³ã‚»ãƒ—ãƒˆ",
              "lineCount": 3,
              "startLine": 113,
              "content": "ã“ã®MCPã‚µãƒ¼ãƒã¯ã€**LLMã®ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³åˆ†æ•£å•é¡Œã‚’è§£æ±º**ã™ã‚‹ãŸã‚ã«ã€å·¨å¤§ãªæŒ‡ç¤ºæ›¸ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰**ä»Šå¿…è¦ãªæŒ‡ç¤ºã ã‘ã‚’å‹•çš„ã«æŠ½å‡º**ã—ã¾ã™ã€‚"
            },
            {
              "heading": "ä¸»è¦ãƒ„ãƒ¼ãƒ«",
              "lineCount": 25,
              "startLine": 117,
              "content": "### `change_context` - é–‹ç™ºæ–‡è„ˆã®å¤‰æ›´\n\nç¾åœ¨ã®é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã‚„ç„¦ç‚¹ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€è‡ªå‹•çš„ã«æœ€é©ãªæŒ‡ç¤ºæ›¸ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚\n\n```typescript\n// ä½¿ç”¨ä¾‹: é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã«ç§»è¡Œ\nchange_context({\n  action: \"update\",\n  state: {\n    phase: \"development\",\n    focus: [\"APIèªè¨¼\", \"JWT\"],\n    priority: \"high\"\n  }\n})\n```\n\n### åˆ©ç”¨å¯èƒ½ãªphase\n\n- `development`: æ–°æ©Ÿèƒ½é–‹ç™º\n- `refactoring`: ã‚³ãƒ¼ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°\n- `testing`: ãƒ†ã‚¹ãƒˆä½œæˆãƒ»ä¿®æ­£\n- `debugging`: ãƒã‚°ä¿®æ­£\n- `documentation`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ"
            },
            {
              "heading": "å‹•çš„æŒ‡ç¤ºæ›¸ç”Ÿæˆã®ä»•çµ„ã¿",
              "lineCount": 6,
              "startLine": 143,
              "content": "1. **change_contextå®Ÿè¡Œ**: é–‹ç™ºæ–‡è„ˆã‚’è¨­å®š\n2. **è‡ªå‹•ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°**: ç¾åœ¨ã®phase/focusã‹ã‚‰é–¢é€£æŒ‡ç¤ºã‚’è¨ˆç®—\n3. **æŒ‡ç¤ºæ›¸ç”Ÿæˆ**: å¿…é ˆæŒ‡ç¤º + é–¢é€£æŒ‡ç¤ºï¼ˆæœ€å¤§10ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼‰ã‚’æŠ½å‡º\n4. **LLMãŒé›†ä¸­**: ä»Šå¿…è¦ãªæŒ‡ç¤ºã ã‘ã§ã‚¢ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’é›†ä¸­"
            },
            {
              "heading": "å¿…é ˆæŒ‡ç¤ºï¼ˆå¸¸ã«å«ã¾ã‚Œã‚‹ï¼‰",
              "lineCount": 7,
              "startLine": 150,
              "content": "- ã“ã®ä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ï¼ˆtools/mcp-server-usage.mdï¼‰\n- TypeScriptè¦ç´„ï¼ˆconventions/typescript.mdï¼‰\n\n\n---"
            },
            {
              "heading": "architecture: architecture/api-design.md",
              "lineCount": 4,
              "startLine": 158,
              "content": "# APIè¨­è¨ˆã®åŸå‰‡"
            },
            {
              "heading": "RESTfulè¨­è¨ˆ",
              "lineCount": 5,
              "startLine": 163,
              "content": "- ãƒªã‚½ãƒ¼ã‚¹æŒ‡å‘ã®URLè¨­è¨ˆ\n- é©åˆ‡ãªHTTPãƒ¡ã‚½ãƒƒãƒ‰ä½¿ç”¨ï¼ˆGET/POST/PUT/DELETEï¼‰\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã®æ­£ã—ã„ä½¿ç”¨"
            },
            {
              "heading": "ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¨­è¨ˆ",
              "lineCount": 9,
              "startLine": 169,
              "content": "```\nGET    /api/users       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§\nGET    /api/users/:id   # ãƒ¦ãƒ¼ã‚¶ãƒ¼è©³ç´°\nPOST   /api/users       # ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ\nPUT    /api/users/:id   # ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°\nDELETE /api/users/:id   # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤\n```"
            },
            {
              "heading": "ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼",
              "lineCount": 15,
              "startLine": 179,
              "content": "```typescript\n{\n  success: boolean;\n  data?: T;\n  error?: {\n    code: string;\n    message: string;\n  };\n}\n```\n\n\n---"
            },
            {
              "heading": "patterns: patterns/error-handling.md",
              "lineCount": 4,
              "startLine": 195,
              "content": "# ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³"
            },
            {
              "heading": "Try-Catch ã®é©åˆ‡ãªä½¿ç”¨",
              "lineCount": 16,
              "startLine": 200,
              "content": "```typescript\nasync function fetchData(): Promise<Data> {\n  try {\n    const response = await api.get('/data');\n    return response.data;\n  } catch (error) {\n    if (error instanceof ApiError) {\n      console.error('API Error:', error.message);\n      throw new CustomError('ãƒ‡ãƒ¼ã‚¿å–å¾—å¤±æ•—', error);\n    }\n    throw error;\n  }\n}\n```"
            },
            {
              "heading": "ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹",
              "lineCount": 17,
              "startLine": 217,
              "content": "```typescript\nclass CustomError extends Error {\n  constructor(\n    message: string,\n    public code: string,\n    public cause?: Error\n  ) {\n    super(message);\n    this.name = 'CustomError';\n  }\n}\n```\n\n\n---"
            },
            {
              "heading": "_templates: _templates/mcp-tools-usage.md",
              "lineCount": 6,
              "startLine": 235,
              "content": "# MCPãƒ„ãƒ¼ãƒ«åˆ©ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æœ¬MCPã‚µãƒ¼ãƒã‚’ä½¿ã†éš›ã®åŸºæœ¬ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚"
            },
            {
              "heading": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®è¨­å®š",
              "lineCount": 8,
              "startLine": 242,
              "content": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç‰¹æ€§ã«å¿œã˜ã¦ã€ä»¥ä¸‹ã®ã‚«ãƒ†ã‚´ãƒªã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º:\n\n- `architecture/`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³\n- `patterns/`: ã‚ˆãä½¿ã†å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³\n- `conventions/`: ãƒãƒ¼ãƒ å›ºæœ‰ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„\n- `phases/`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå›ºæœ‰ã®é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º"
            },
            {
              "heading": "ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼è¨­å®š",
              "lineCount": 16,
              "startLine": 251,
              "content": "å„Markdownãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ä»¥ä¸‹ã®ãƒ•ãƒ­ãƒ³ãƒˆãƒã‚¿ãƒ¼ã‚’è¿½åŠ :\n\n```yaml\n---\ncategory: ã‚«ãƒ†ã‚´ãƒªå\ntags: [ã‚¿ã‚°1, ã‚¿ã‚°2]\npriority: high | medium | low\nrequired: true | false  # å¸¸ã«å«ã‚ã‚‹å ´åˆã¯true\nphases: [development, refactoring, ...]\n---\n```\n\n\n---"
            },
            {
              "heading": "patterns: patterns/testing.md",
              "lineCount": 4,
              "startLine": 268,
              "content": "# ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³"
            },
            {
              "heading": "ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®åŸºæœ¬",
              "lineCount": 13,
              "startLine": 273,
              "content": "```typescript\ndescribe('calculateSum', () => {\n  it('æ­£ã®æ•°ã®åˆè¨ˆã‚’è¨ˆç®—', () => {\n    expect(calculateSum(2, 3)).toBe(5);\n  });\n\n  it('è² ã®æ•°ã‚’å«ã‚€åˆè¨ˆã‚’è¨ˆç®—', () => {\n    expect(calculateSum(-2, 3)).toBe(1);\n  });\n});\n```"
            },
            {
              "heading": "ãƒ¢ãƒƒã‚¯",
              "lineCount": 7,
              "startLine": 287,
              "content": "```typescript\nconst mockFn = jest.fn();\nmockFn.mockReturnValue(42);\nexpect(mockFn()).toBe(42);\n```"
            },
            {
              "heading": "éåŒæœŸãƒ†ã‚¹ãƒˆ",
              "lineCount": 11,
              "startLine": 295,
              "content": "```typescript\nit('éåŒæœŸå‡¦ç†ã®ãƒ†ã‚¹ãƒˆ', async () => {\n  const data = await fetchData();\n  expect(data).toBeDefined();\n});\n```\n\n\n---"
            },
            {
              "heading": "conventions: conventions/git-workflow.md",
              "lineCount": 4,
              "startLine": 307,
              "content": "# Git ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼"
            },
            {
              "heading": "ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥",
              "lineCount": 6,
              "startLine": 312,
              "content": "- `main`: æœ¬ç•ªç’°å¢ƒ\n- `feature/xxx`: æ–°æ©Ÿèƒ½é–‹ç™º\n- `fix/xxx`: ãƒã‚°ä¿®æ­£\n- `refactor/xxx`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°"
            },
            {
              "heading": "ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
              "lineCount": 17,
              "startLine": 319,
              "content": "```\n<type>: <subject>\n\n<body>\n```\n\n### Type\n- `feat`: æ–°æ©Ÿèƒ½\n- `fix`: ãƒã‚°ä¿®æ­£\n- `docs`: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n- `refactor`: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°\n- `test`: ãƒ†ã‚¹ãƒˆè¿½åŠ \n\n\n---"
            },
            {
              "heading": "phases: phases/development.md",
              "lineCount": 4,
              "startLine": 337,
              "content": "# é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºã®æŒ‡ç¤º"
            },
            {
              "heading": "æ–°æ©Ÿèƒ½é–‹ç™ºã®æµã‚Œ",
              "lineCount": 6,
              "startLine": 342,
              "content": "1. **è¦ä»¶ç¢ºèª**: å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½ã®ä»•æ§˜ã‚’æ˜ç¢ºåŒ–\n2. **è¨­è¨ˆ**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒ»ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’è¨­è¨ˆ\n3. **å®Ÿè£…**: TDDï¼ˆãƒ†ã‚¹ãƒˆé§†å‹•é–‹ç™ºï¼‰ã§é€²ã‚ã‚‹\n4. **ãƒ†ã‚¹ãƒˆ**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆã‚’è¿½åŠ "
            },
            {
              "heading": "å®Ÿè£…æ™‚ã®æ³¨æ„ç‚¹",
              "lineCount": 10,
              "startLine": 349,
              "content": "- å°ã•ãªã‚³ãƒŸãƒƒãƒˆã§é »ç¹ã«ã‚³ãƒŸãƒƒãƒˆ\n- å‹å®‰å…¨æ€§ã‚’æœ€å„ªå…ˆ\n- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’å¿˜ã‚Œãšã«\n- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚³ãƒ¡ãƒ³ãƒˆï¼ˆJSDocï¼‰ã‚’è¿½åŠ \n\n\n---"
            }
          ],
          "compatible": false
        },
        "recommendation": "çŸ›ç›¾ã‚„é‡è¤‡ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚æ‰‹å‹•ã§ã®æ•´ç†ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚"
      },
      "proposalData": {
        "title": "Manual Fix Required",
        "summary": "å•é¡Œã®ã‚ã‚‹ç®‡æ‰€ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ (1ä»¶)ã€‚è‡ªå‹•ç§»è¡Œã¯æ¨å¥¨ã•ã‚Œã¾ã›ã‚“ã€‚",
        "steps": [
          "1. çŸ›ç›¾ãƒ»é‡è¤‡ãƒ»æ›–æ˜§è¡¨ç¾ã‚’æ‰‹å‹•ã§ä¿®æ­£",
          "2. ä¿®æ­£å¾Œã« onboarding({ action: \"analyze\" }) ã‚’å†å®Ÿè¡Œ",
          "3. äº’æ›æ€§ãŒç¢ºèªã§ããŸã‚‰ propose â†’ migrate ã‚’æ¤œè¨"
        ],
        "risk": "high",
        "backupFile": ".copilot-state/backup/copilot-instructions.md.bak-2025-12-02T02-18-30-917Z",
        "rollbackUntil": "2025-12-09T02:18:30.917Z"
      }
    }
  },
  "response": {
    "role": "assistant",
    "content": {
      "type": "text",
      "text": "# ğŸ”§ Migration Proposal: Manual Fix Required\n\n## Overview\n**Risk Level:** ğŸ”´ **High** - Manual intervention needed\n\nThe analysis has detected **1 issue** in your Copilot instructions that requires your attention before proceeding with automatic migration. This typically means there are contradictions, duplicates, or ambiguous expressions that could cause unexpected behavior.\n\n---\n\n## ğŸ“‹ Proposed Migration Steps\n\nFollow these steps to safely migrate your instructions:\n\n1. **Manual Review & Fix**\n   - Examine the detected contradictions, duplicates, or unclear instructions\n   - Resolve conflicts and remove redundancies\n   - Clarify any ambiguous language\n\n2. **Re-analyze**\n   - After making fixes, run `onboarding({ action: \"analyze\" })` again\n   - Verify that issues have been resolved\n\n3. **Proceed with Migration**\n   - Once compatibility is confirmed, consider running:\n     - `onboarding({ action: \"propose\" })` for a new proposal\n     - `onboarding({ action: \"migrate\" })` to apply changes\n\n---\n\n## ğŸ›¡ï¸ Safety & Backup\n\n**Backup Created:**\n```\n.copilot-state/backup/copilot-instructions.md.bak-2025-12-02T02-18-30-917Z\n```\n\n**Rollback Available Until:** December 9, 2025 at 02:18 UTC (7 days)\n\nYour original instructions are safely backed up. You can restore them anytime before the rollback deadline if needed.\n\n---\n\n## âš ï¸ Why High Risk?\n\nAutomatic migration is **not recommended** because:\n- Conflicting instructions could lead to unpredictable AI behavior\n- Duplicate rules might cause confusion in which guidance takes precedence\n- Ambiguous expressions may be interpreted differently than intended\n\nManual review ensures your instructions remain clear and consistent.\n\n---\n\n## ğŸ¯ Next Actions\n\n**Choose your path:**\n\n- **Review & Fix** (Recommended): Manually resolve the detected issues, then re-analyze\n- **Skip**: Keep current instructions unchanged (not recommended if issues affect functionality)\n- **Need Help?**: Review the analysis results to understand what needs fixing\n\nğŸ’¡ **Tip:** Take your time with manual fixes. Clear, unambiguous instructions lead to better Copilot assistance!"
    },
    "model": "copilot/claude-sonnet-4.5"
  }
}